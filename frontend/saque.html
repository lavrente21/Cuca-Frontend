<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuca - Sacar</title>
    <!-- O caminho para o CSS deve ser absoluto para funcionar bem com render_template -->
    <link rel="stylesheet" href="/css/style.css"> 
    <!-- Novo import JS para a lógica específica desta página. É um módulo agora. -->
    <script type="module" src="/js/utils.js"></script>
    <script type="module" src="/js/session.js"></script>
    <script type="module" src="/js/pageSpecific-saque.js"></script>
</head>
<body>

    <div class="app-container">
        
        <header class="header">
            <svg viewBox="0 0 24 24" class="back-icon">
                <a href="/Pagina inicial.html" style="text-decoration: none;"> <!-- Link de volta para a homepage -->
                    <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z" fill="currentColor"/>
                </a>
            </svg>
            <h1>Sacar</h1>
        </header>

        <!-- Adicionei um ID ao formulário para poder capturar o evento de submissão -->
        <form id="withdraw-form" action="#" method="get">
            <main class="main-content">
                <div class="card balance-card">
                    <p>Saldo Disponível</p>
                    <span id="current-withdraw-balance" class="balance-amount">Kz 0.00</span>
                </div>

                <section class="form-section">
                    <h2>Informações do Saque</h2>
                    
                    <div class="input-group">
                        <label for="withdrawAmount">Montante do Saque</label>
                        <input type="number" id="withdrawAmount" placeholder="Ex: 5000" min="1" step="0.01">
                        <div class="checkbox-group">
                            <input type="checkbox" id="withdraw-all-checkbox">
                            <label for="withdraw-all-checkbox">Sacar tudo</label>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Carteira Vinculada</label>
                        <div class="linked-account-info" id="linked-account-display">
                            <p>Nenhuma conta bancária vinculada.</p>
                            <a href="/vincular conta.html" class="link-button">Vincular Agora</a>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="transactionPassword">Senha de Transação</label>
                        <input type="password" id="transactionPassword" placeholder="Insira sua senha de transação">
                    </div>

                    <div class="amount-summary">
                        <span>Valor real a receber (com taxa de 5%):</span>
                        <span id="actualAmount" class="actual-amount-value">Kz 0.00</span>
                    </div>

                    <button type="submit" class="action-main-button" id="confirm-withdraw-button">Confirmar Saque</button>
                </section>
            </main>
        </form>

        <nav class="bottom-navigation">
            <a href="Pagina inicial.html" class="nav-item">
                <svg viewBox="0 0 24 24" class="bottom-icon">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                </svg>
                <span>Início</span>
            </a>
            <a href="lista de investimento.html" class="nav-item">
                <svg viewBox="0 0 24 24" class="bottom-icon">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm-1-8H9V8h2v2h2v2h-2z"/>
                </svg>
                <span>Investir</span>
            </a>
            <a href="#" class="nav-item">
                <svg viewBox="0 0 24 24" class="bottom-icon">
                    <path d="M12 2c-4.97 0-9 4.03-9 9 0 4.25 3.14 7.6 7.23 8.36L12 20l1.77-1.64C17.86 18.6 21 15.25 21 11c0-4.97-4.03-9-9-9zm-1 16.5V11h2v7.5h-2zM12 6c-2.21 0-4 1.79-4 4h8c0-2.21-1.79-4-4-4z"/>
                </svg>
                <span>Tarefas</span>
            </a>
            <a href="/blog.html" class="nav-item">
                <svg viewBox="0 0 24 24" class="bottom-icon">
                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM7 7h10v2H7V7zm10 4H7v2h10v-2zM7 15h10v2H7v-2z"/>
                </svg>
                <span>Blog</span>
            </a>
            <a href="minha conta.html" class="nav-item">
                <svg viewBox="0 0 24 24" class="bottom-icon">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.93 0 3.5 1.57 3.5 3.5S13.93 12 12 12s-3.5-1.57-3.5-3.5S10.07 5 12 5zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08s5.97 1.09 6 3.08c-1.29 1.94-3.5 3.22-6 3.22z"/>
                </svg>
                <span>Conta</span>
            </a>
        </nav>

    </div>

    <!-- Botão Flutuante (FAB) para Histórico de Transações -->
    <button id="history-fab" class="floating-action-button">
        <svg viewBox="0 0 24 24">
            <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.51 0-2.91-.49-4.06-1.3l-1.42 1.42C9.43 19.54 10.66 20 12 20c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4 2-1 2-5-2V8h2z"/>
        </svg>
        <span>Histórico</span>
    </button>

    <!-- Modal para Histórico de Transações -->
    <div id="history-modal" class="modal-backdrop" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Histórico de Transações</h2>
                <button class="close-button" id="close-history-modal">&times;</button>
            </div>
            <div class="modal-body">
                <ul id="transactions-list" class="transactions-list">
                    <!-- Transações serão carregadas aqui via JavaScript -->
                    <li class="transaction-item placeholder-item">Nenhuma transação encontrada.</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Message Box e Loading Indicator (estes devem estar no seu HTML principal, se não estiverem) -->
    <!-- Estes são os modais globais controlados por utils.js -->
    <div id="modal-backdrop" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); z-index: 999;"></div>

    <div id="message-box" style="display: none; position: fixed; background-color: white; padding: 20px; border-radius: 8px; text-align: center; color: black; max-width: 90%; width: 300px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); z-index: 1000; top: 50%; left: 50%; transform: translate(-50%, -50%);">
        <p id="message-text" style="margin-bottom: 0; font-size: 1.1em;"></p>
    </div>

    <div id="loading-indicator" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); color: white; justify-content: center; align-items: center; font-size: 1.5em; z-index: 1001;">
        A carregar...
    </div>

</body>
</html>
